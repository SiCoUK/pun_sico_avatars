<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE extension SYSTEM "ext-1.0.dtd">

<!--
/**
 * SEO Avatars
 *
 * @copyright Copyright (C) 2009 SiCo
 * @package sico_avatars
 */
-->

<extension engine="1.0">
    <id>sico_avatars</id>
    <title>SiCo Avatars</title>
    <version>0.0.7.4</version>
    <description>Allows a warning to be added to the avatar page and implements gravatar for users without an avatar.</description>
    <author>Simon Corless</author>
    <minversion>1.3</minversion>
    <maxtestedon>1.3.6</maxtestedon>

    <install><![CDATA[

    ]]></install>

    <uninstall><![CDATA[

    ]]></uninstall>

    <hooks>

        <!--
        /**
         * Add a warning to the bottom of the avatar bulleted list
         */ -->
        <hook id="pf_change_details_avatar_pre_header_load"><![CDATA[

            // Include the language file
            if (file_exists($ext_info['path'].'/lang/'.$forum_user['language'].'/'.$ext_info['id'].'.php')) {
                include_once $ext_info['path'].'/lang/'.$forum_user['language'].'/'.$ext_info['id'].'.php';
            } else {
                include_once $ext_info['path'].'/lang/English/'.$ext_info['id'].'.php';
            }
            
            // Include the extension functions
            include_once $ext_info['path'].'/functions.php';
            
            // Gravatar Message
            $forum_page['frm_info']['gravatar'] = '<li><span>' . $lang_sico_avatar['Gravatar Description'] . '</span></li>';
            
            // Avatar Warning
            $forum_page['frm_info']['avatar_warning'] = '<li><span>' . $lang_sico_avatar['Avatar Warning'] . '</span></li>';
        ]]></hook>


        <!--
        /**
         * Add the users current gravatar
         */ -->
        <hook id="pf_change_details_avatar_pre_cur_avatar_info"><![CDATA[
            select_gravatar();
        ]]></hook>
        
    </hooks>

</extension>